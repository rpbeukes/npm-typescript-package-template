name: auto-merge

on:
  pull_request:
    branches: [master]

jobs:
  auto-merge:
    runs-on: ubuntu-latest
    steps:
      - name: Dump GitHub context
        env:
          GITHUB_CONTEXT: ${{ toJson(github) }}
        run: echo "$GITHUB_CONTEXT"

      - name: auto merge
        uses: plm9606/automerge_actions@1.2.2
        with:
          reviewers-number: 0
          # The merge method ("merge", "squash", "rebase"). Default is "merge"
          merge-method: squash
          # Let the bot delete the merged branch. true or false.
          auto-delete: true
        if: github.actor == 'rpbeukes-bot'
          env:
            GITHUB_TOKEN: ${{ secrets.BOT_PAT }}

      #  - name: auto merge
      #   # Custom action for auto merging already available on marketplace
      #   uses: pascalgn/automerge-action@v0.12.0
      #   with:
      #     args: '--trace'
      #   # Perform the auto merge action only when the PR is raised by the bot
      #   if: github.actor == 'rpbeukes-bot'
      #   env:
      #     GITHUB_TOKEN: ${{ secrets.BOT_PAT }}
      #     MERGE_METHOD: squash
      #     UPDATE_METHOD: 'rebase'
